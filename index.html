<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LifeIndex</title>
    <meta name="description"
        content="Compara el costo de vida entre ciudades del mundo. Personaliza categor√≠as y convierte a tu moneda.">
    <link rel="icon" href="logo2.png" type="image/png">
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8290245173258073"
        crossorigin="anonymous"></script>
    <!-- Fuentes modernas y legibles -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;500;600;700;800&family=Inter:wght@400;500;600&display=swap"
        rel="stylesheet">

    <style>
        :root {
            /* Color System - Profesional y moderno */
            --primary: #2563EB;
            --primary-dark: #1E40AF;
            --primary-light: #60A5FA;
            --secondary: #10B981;
            --accent: #F59E0B;
            --danger: #EF4444;
            --warning: #F59E0B;

            /* Neutrals - Sistema de grises */
            --gray-50: #F9FAFB;
            --gray-100: #F3F4F6;
            --gray-200: #E5E7EB;
            --gray-300: #D1D5DB;
            --gray-400: #9CA3AF;
            --gray-500: #6B7280;
            --gray-600: #4B5563;
            --gray-700: #374151;
            --gray-800: #1F2937;
            --gray-900: #111827;

            /* Backgrounds */
            --bg-page: #F9FAFB;
            --bg-card: #FFFFFF;
            --bg-hover: #F3F4F6;
            --bg-active: #EEF2FF;

            /* Borders */
            --border-color: #E5E7EB;
            --border-hover: #D1D5DB;

            /* Shadows */
            --shadow-xs: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            --shadow-sm: 0 1px 3px 0 rgba(0, 0, 0, 0.1), 0 1px 2px 0 rgba(0, 0, 0, 0.06);
            --shadow-md: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
            --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            --shadow-xl: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);

            /* Typography */
            --font-display: 'Outfit', sans-serif;
            --font-body: 'Inter', sans-serif;

            /* Spacing System */
            --space-1: 0.25rem;
            --space-2: 0.5rem;
            --space-3: 0.75rem;
            --space-4: 1rem;
            --space-5: 1.25rem;
            --space-6: 1.5rem;
            --space-8: 2rem;
            --space-10: 2.5rem;
            --space-12: 3rem;

            /* Radius */
            --radius-sm: 0.375rem;
            --radius-md: 0.5rem;
            --radius-lg: 0.75rem;
            --radius-xl: 1rem;
            --radius-full: 9999px;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-body);
            background: var(--bg-page);
            color: var(--gray-900);
            line-height: 1.5;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Header Compacto */
        .header {
            background: var(--bg-card);
            border-bottom: 1px solid var(--border-color);
            position: sticky;
            top: 0;
            z-index: 100;
            box-shadow: var(--shadow-sm);
        }

        .header-container {
            max-width: 1280px;
            margin: 0 auto;
            padding: var(--space-4) var(--space-4);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: var(--space-3);
        }

        .logo-icon {
            font-size: 1.75rem;
        }

        .logo-text h1 {
            font-family: var(--font-display);
            font-size: 1.25rem;
            font-weight: 700;
            color: var(--gray-900);
        }

        .logo-text .tagline {
            font-size: 0.75rem;
            color: var(--gray-500);
        }

        /* Currency Selector Compacto */
        .currency-selector {
            position: relative;
        }

        .currency-btn {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            padding: var(--space-2) var(--space-3);
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            font-family: var(--font-display);
            font-weight: 600;
            font-size: 0.875rem;
            color: var(--gray-700);
            cursor: pointer;
            transition: all 0.2s;
        }

        .currency-btn:hover {
            border-color: var(--primary);
            box-shadow: var(--shadow-sm);
        }

        .currency-dropdown {
            position: absolute;
            top: calc(100% + var(--space-2));
            right: 0;
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            box-shadow: var(--shadow-xl);
            min-width: 220px;
            max-height: 320px;
            overflow-y: auto;
            display: none;
            z-index: 1000;
        }

        .currency-dropdown.active {
            display: block;
        }

        .currency-option {
            display: flex;
            align-items: center;
            gap: var(--space-2);
            padding: var(--space-3) var(--space-4);
            cursor: pointer;
            transition: background 0.15s;
        }

        .currency-option:hover {
            background: var(--bg-hover);
        }

        .currency-option.selected {
            background: var(--bg-active);
            color: var(--primary);
        }

        /* Main Container */
        .container {
            max-width: 1280px;
            margin: 0 auto;
            padding: var(--space-6) var(--space-4);
        }

        /* Tab System */
        .tabs {
            display: flex;
            gap: var(--space-2);
            margin-bottom: var(--space-6);
            border-bottom: 2px solid var(--border-color);
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        .tab {
            padding: var(--space-3) var(--space-5);
            border: none;
            background: transparent;
            font-family: var(--font-display);
            font-weight: 600;
            font-size: 0.9375rem;
            color: var(--gray-600);
            cursor: pointer;
            border-bottom: 2px solid transparent;
            margin-bottom: -2px;
            transition: all 0.2s;
            white-space: nowrap;
        }

        .tab:hover {
            color: var(--gray-900);
        }

        .tab.active {
            color: var(--primary);
            border-bottom-color: var(--primary);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
            animation: fadeIn 0.3s;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Compact Grid Layout */
        .compact-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-4);
            margin-bottom: var(--space-6);
        }

        /* Card System */
        .card {
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: var(--space-5);
            box-shadow: var(--shadow-xs);
        }

        .card-title {
            font-family: var(--font-display);
            font-size: 0.9375rem;
            font-weight: 600;
            color: var(--gray-700);
            margin-bottom: var(--space-3);
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }

        /* Form Elements Compactos */
        select,
        input[type="number"] {
            width: 100%;
            padding: var(--space-3) var(--space-4);
            font-size: 0.9375rem;
            font-family: var(--font-body);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            background: var(--bg-card);
            color: var(--gray-900);
            transition: all 0.2s;
        }

        select:focus,
        input[type="number"]:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        select {
            cursor: pointer;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg width='12' height='8' viewBox='0 0 12 8' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 1L6 6L11 1' stroke='%236B7280' stroke-width='2' stroke-linecap='round'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right var(--space-3) center;
            padding-right: var(--space-8);
        }

        /* Budget Input Special */
        .budget-input-wrapper {
            position: relative;
        }

        .budget-input-wrapper::before {
            content: attr(data-symbol);
            position: absolute;
            left: var(--space-4);
            top: 50%;
            transform: translateY(-50%);
            color: var(--gray-500);
            font-weight: 600;
            pointer-events: none;
        }

        .budget-input-wrapper input {
            padding-left: var(--space-8);
        }

        /* Accordion System for Categories */
        .accordion {
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            overflow: hidden;
            margin-bottom: var(--space-4);
        }

        .accordion-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--space-4);
            background: var(--bg-card);
            cursor: pointer;
            transition: background 0.2s;
            border-bottom: 1px solid transparent;
        }

        .accordion-header:hover {
            background: var(--bg-hover);
        }

        .accordion-header.active {
            background: var(--bg-active);
            border-bottom-color: var(--border-color);
        }

        .accordion-title {
            display: flex;
            align-items: center;
            gap: var(--space-3);
            font-weight: 600;
            color: var(--gray-900);
        }

        .accordion-icon {
            font-size: 1.25rem;
        }

        .accordion-meta {
            display: flex;
            align-items: center;
            gap: var(--space-4);
            font-size: 0.875rem;
        }

        .accordion-amount {
            font-family: var(--font-display);
            font-weight: 700;
            color: var(--gray-900);
        }

        .accordion-change {
            padding: var(--space-1) var(--space-2);
            border-radius: var(--radius-sm);
            font-weight: 600;
            font-size: 0.8125rem;
        }

        .accordion-change.positive {
            background: rgba(239, 68, 68, 0.1);
            color: var(--danger);
        }

        .accordion-change.negative {
            background: rgba(16, 185, 129, 0.1);
            color: var(--secondary);
        }

        .accordion-change.neutral {
            background: var(--gray-100);
            color: var(--gray-600);
        }

        .accordion-arrow {
            transition: transform 0.2s;
        }

        .accordion-header.active .accordion-arrow {
            transform: rotate(180deg);
        }

        .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease-out;
        }

        .accordion-content.active {
            max-height: 300px;
        }

        .accordion-body {
            padding: var(--space-4);
            background: var(--bg-hover);
        }

        .comparison-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--space-2) 0;
        }

        .comparison-label {
            font-size: 0.875rem;
            color: var(--gray-600);
        }

        .comparison-value {
            font-family: var(--font-display);
            font-weight: 600;
            color: var(--gray-900);
        }

        /* Summary Card Compacta */
        .summary-card {
            background: linear-gradient(135deg, var(--primary), var(--primary-dark));
            border-radius: var(--radius-lg);
            padding: var(--space-6);
            color: white;
            margin-bottom: var(--space-6);
        }

        .summary-title {
            font-size: 0.875rem;
            opacity: 0.9;
            margin-bottom: var(--space-2);
        }

        .summary-amount {
            font-family: var(--font-display);
            font-size: 2rem;
            font-weight: 800;
            margin-bottom: var(--space-1);
        }

        .summary-subtitle {
            font-size: 0.875rem;
            opacity: 0.85;
            margin-bottom: var(--space-4);
        }

        .summary-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--space-4);
            padding-top: var(--space-4);
            border-top: 1px solid rgba(255, 255, 255, 0.2);
        }

        .stat {
            text-align: center;
        }

        .stat-value {
            font-family: var(--font-display);
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: var(--space-1);
        }

        .stat-label {
            font-size: 0.75rem;
            opacity: 0.85;
        }

        /* Category Management */
        .category-list {
            display: grid;
            gap: var(--space-3);
        }

        .category-item-manage {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--space-4);
            background: var(--bg-card);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
        }

        .category-info {
            display: flex;
            align-items: center;
            gap: var(--space-3);
            flex: 1;
        }

        .category-icon-large {
            width: 40px;
            height: 40px;
            background: var(--bg-hover);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
        }

        .category-details {
            flex: 1;
        }

        .category-name {
            font-weight: 600;
            color: var(--gray-900);
            margin-bottom: var(--space-1);
        }

        .category-weight {
            font-size: 0.8125rem;
            color: var(--gray-500);
        }

        .category-actions {
            display: flex;
            gap: var(--space-2);
        }

        /* Buttons */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: var(--space-2);
            padding: var(--space-3) var(--space-4);
            border: none;
            border-radius: var(--radius-md);
            font-family: var(--font-display);
            font-weight: 600;
            font-size: 0.875rem;
            cursor: pointer;
            transition: all 0.2s;
            white-space: nowrap;
        }

        .btn-primary {
            background: var(--primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--primary-dark);
            transform: translateY(-1px);
            box-shadow: var(--shadow-md);
        }

        .btn-secondary {
            background: var(--gray-100);
            color: var(--gray-700);
        }

        .btn-secondary:hover {
            background: var(--gray-200);
        }

        .btn-danger {
            background: rgba(239, 68, 68, 0.1);
            color: var(--danger);
        }

        .btn-danger:hover {
            background: rgba(239, 68, 68, 0.2);
        }

        .btn-sm {
            padding: var(--space-2) var(--space-3);
            font-size: 0.8125rem;
        }

        .btn-block {
            width: 100%;
        }

        /* Modal System */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(4px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: var(--space-4);
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal {
            background: var(--bg-card);
            border-radius: var(--radius-xl);
            max-width: 500px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            box-shadow: var(--shadow-xl);
            animation: modalSlide 0.3s;
        }

        @keyframes modalSlide {
            from {
                opacity: 0;
                transform: translateY(-20px) scale(0.95);
            }

            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .modal-header {
            padding: var(--space-5);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-title {
            font-family: var(--font-display);
            font-size: 1.125rem;
            font-weight: 700;
            color: var(--gray-900);
        }

        .modal-close {
            width: 32px;
            height: 32px;
            border: none;
            background: var(--gray-100);
            border-radius: var(--radius-md);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s;
        }

        .modal-close:hover {
            background: var(--gray-200);
        }

        .modal-body {
            padding: var(--space-5);
        }

        .form-group {
            margin-bottom: var(--space-4);
        }

        .form-label {
            display: block;
            font-weight: 600;
            font-size: 0.875rem;
            color: var(--gray-700);
            margin-bottom: var(--space-2);
        }

        .form-help {
            font-size: 0.8125rem;
            color: var(--gray-500);
            margin-top: var(--space-1);
        }

        .icon-picker {
            display: grid;
            grid-template-columns: repeat(8, 1fr);
            gap: var(--space-2);
        }

        .icon-option {
            width: 40px;
            height: 40px;
            border: 2px solid var(--border-color);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.25rem;
            cursor: pointer;
            transition: all 0.2s;
        }

        .icon-option:hover {
            border-color: var(--primary);
            background: var(--bg-active);
        }

        .icon-option.selected {
            border-color: var(--primary);
            background: var(--bg-active);
            box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
        }

        .modal-footer {
            padding: var(--space-5);
            border-top: 1px solid var(--border-color);
            display: flex;
            gap: var(--space-3);
            justify-content: flex-end;
        }

        /* Share Modal */
        .share-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--space-3);
        }

        .share-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: var(--space-2);
            padding: var(--space-4);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            cursor: pointer;
            transition: all 0.2s;
            text-align: center;
        }

        .share-option:hover {
            border-color: var(--primary);
            background: var(--bg-active);
            transform: translateY(-2px);
            box-shadow: var(--shadow-sm);
        }

        .share-icon {
            font-size: 2rem;
        }

        .share-label {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--gray-700);
        }

        /* Alert System */
        .alert {
            padding: var(--space-4);
            border-radius: var(--radius-md);
            margin-bottom: var(--space-4);
            display: flex;
            align-items: flex-start;
            gap: var(--space-3);
        }

        .alert-info {
            background: rgba(37, 99, 235, 0.1);
            border: 1px solid rgba(37, 99, 235, 0.2);
            color: var(--primary-dark);
        }

        .alert-success {
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.2);
            color: #047857;
        }

        .alert-icon {
            font-size: 1.25rem;
        }

        .alert-content {
            flex: 1;
        }

        .alert-title {
            font-weight: 600;
            margin-bottom: var(--space-1);
        }

        .alert-text {
            font-size: 0.875rem;
            opacity: 0.9;
        }

        /* Ad Spaces Compactos */
        .ad-space {
            background: var(--gray-50);
            border: 1px dashed var(--border-color);
            border-radius: var(--radius-md);
            padding: var(--space-4);
            text-align: center;
            margin: var(--space-6) 0;
            min-height: 120px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .ad-label {
            font-size: 0.6875rem;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            color: var(--gray-400);
            margin-bottom: var(--space-2);
        }

        .ad-text {
            font-size: 0.8125rem;
            color: var(--gray-500);
        }

        /* Responsive */
        @media (max-width: 768px) {
            .compact-grid {
                grid-template-columns: 1fr;
            }

            .summary-stats {
                grid-template-columns: 1fr;
                gap: var(--space-3);
            }

            .stat {
                text-align: left;
            }

            .share-grid {
                grid-template-columns: 1fr;
            }

            .tabs {
                gap: var(--space-1);
            }

            .tab {
                padding: var(--space-3) var(--space-4);
                font-size: 0.875rem;
            }

            .modal {
                margin: var(--space-4);
            }
        }

        @media (max-width: 480px) {
            .header-container {
                padding: var(--space-3);
            }

            .logo-text h1 {
                font-size: 1.125rem;
            }

            .container {
                padding: var(--space-4) var(--space-3);
            }

            .card {
                padding: var(--space-4);
            }

            .summary-amount {
                font-size: 1.75rem;
            }

            .icon-picker {
                grid-template-columns: repeat(6, 1fr);
            }
        }

        /* Utility Classes */
        .mb-0 {
            margin-bottom: 0;
        }

        .mb-2 {
            margin-bottom: var(--space-2);
        }

        .mb-4 {
            margin-bottom: var(--space-4);
        }

        .mb-6 {
            margin-bottom: var(--space-6);
        }

        .text-center {
            text-align: center;
        }

        .text-muted {
            color: var(--gray-500);
        }

        .hidden {
            display: none;
        }
    </style>
</head>

<body>
    <!-- Header -->
    <header class="header">
        <div class="header-container">
            <div class="logo">
                <div class="logo-icon">üí∞</div>
                <div class="logo-text">
                    <h1>Calculadora de Costo de Vida</h1>
                    <div class="tagline">Compara ciudades en tu moneda</div>
                </div>
            </div>

            <div class="currency-selector">
                <button class="currency-btn" id="currencyBtn">
                    <span id="currentFlag">üá∫üá∏</span>
                    <span id="currentCurrency">USD</span>
                    <span style="font-size: 0.75rem; opacity: 0.6;">‚ñº</span>
                </button>
                <div class="currency-dropdown" id="currencyDropdown">
                    <!-- Populated by JS -->
                </div>
            </div>
        </div>
    </header>

    <div class="container">
        <!-- Tabs Navigation -->
        <div class="tabs">
            <button class="tab active" data-tab="compare">üåç Comparar</button>
            <button class="tab" data-tab="categories">‚öôÔ∏è Gestionar Categor√≠as</button>
            <button class="tab" data-tab="results">üìä Resultados Detallados</button>
        </div>

        <!-- Tab: Comparar -->
        <div class="tab-content active" id="tab-compare">
            <div class="alert alert-info">
                <div class="alert-icon">üí°</div>
                <div class="alert-content">
                    <div class="alert-title">¬øC√≥mo funciona?</div>
                    <div class="alert-text">Selecciona dos ciudades y tu presupuesto actual. Te mostraremos cu√°nto
                        necesitar√≠as en la otra ciudad.</div>
                </div>
            </div>

            <div class="compact-grid">
                <div class="card">
                    <div class="card-title">üìç Ciudad Base</div>
                    <select id="city1">
                        <!-- Cities populated by JS -->
                    </select>
                </div>

                <div class="card">
                    <div class="card-title">üéØ Ciudad Objetivo</div>
                    <select id="city2">
                        <!-- Cities populated by JS -->
                    </select>
                </div>
            </div>

            <div class="card">
                <div class="card-title">üíµ Tu presupuesto mensual actual</div>
                <div class="budget-input-wrapper" data-symbol="$" id="budgetWrapper">
                    <input type="number" id="budget" value="3000" min="100" max="100000" step="100" placeholder="3000">
                </div>
            </div>

            <!-- Ad Space 1 -->
            <div class="ad-space">
                <div class="ad-label">Publicidad</div>
                <div class="ad-text">üì¢ Espacio AdSense (Responsive)</div>
            </div>

            <!-- Summary Card -->
            <div class="summary-card">
                <div class="summary-title">Necesitar√≠as aproximadamente</div>
                <div class="summary-amount" id="totalAmount">$3,450</div>
                <div class="summary-subtitle" id="summaryCity">para vivir en Londres</div>

                <div class="summary-stats">
                    <div class="stat">
                        <div class="stat-value" id="differenceValue">+15%</div>
                        <div class="stat-label">Diferencia</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value" id="mostExpensive">Vivienda</div>
                        <div class="stat-label">M√°s caro</div>
                    </div>
                    <div class="stat">
                        <div class="stat-value" id="costIndex">115</div>
                        <div class="stat-label">√çndice</div>
                    </div>
                </div>
            </div>

            <button class="btn btn-primary btn-block" onclick="openShareModal()">
                üîó Compartir Resultados
            </button>
        </div>

        <!-- Tab: Gestionar Categor√≠as -->
        <div class="tab-content" id="tab-categories">
            <div class="alert alert-info">
                <div class="alert-icon">‚ÑπÔ∏è</div>
                <div class="alert-content">
                    <div class="alert-title">Personaliza tus categor√≠as</div>
                    <div class="alert-text">Puedes agregar, editar o eliminar categor√≠as seg√∫n tus necesidades. El total
                        de porcentajes debe sumar 100%.</div>
                </div>
            </div>

            <button class="btn btn-primary mb-4" onclick="openCategoryModal()">
                ‚ûï Agregar Nueva Categor√≠a
            </button>

            <div class="category-list" id="categoryManageList">
                <!-- Populated by JS -->
            </div>

            <div id="percentageWarning" class="alert hidden"
                style="background: rgba(239, 68, 68, 0.1); border-color: rgba(239, 68, 68, 0.2); color: var(--danger);">
                <div class="alert-icon">‚ö†Ô∏è</div>
                <div class="alert-content">
                    <div class="alert-title">Suma de porcentajes incorrecta</div>
                    <div class="alert-text">El total actual es <strong id="currentTotal">0%</strong>. Debe ser
                        exactamente 100%.</div>
                </div>
            </div>
        </div>

        <!-- Tab: Resultados Detallados -->
        <div class="tab-content" id="tab-results">
            <div class="card mb-4">
                <div class="card-title">üìä Comparaci√≥n por Categor√≠a</div>
                <div id="accordionContainer">
                    <!-- Populated by JS -->
                </div>
            </div>

            <!-- Ad Space 2 -->
            <div class="ad-space">
                <div class="ad-label">Publicidad</div>
                <div class="ad-text">üì¢ Espacio AdSense (300x250)</div>
            </div>
        </div>
    </div>

    <!-- Modal: Add/Edit Category -->
    <div class="modal-overlay" id="categoryModal">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-title" id="categoryModalTitle">Agregar Categor√≠a</div>
                <button class="modal-close" onclick="closeCategoryModal()">‚úï</button>
            </div>
            <div class="modal-body">
                <form id="categoryForm">
                    <input type="hidden" id="categoryId">

                    <div class="form-group">
                        <label class="form-label">Icono</label>
                        <div class="icon-picker" id="iconPicker">
                            <!-- Populated by JS -->
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="categoryName">Nombre de la categor√≠a</label>
                        <input type="text" id="categoryName" placeholder="Ej: Vivienda" required>
                    </div>

                    <div class="form-group">
                        <label class="form-label" for="categoryWeight">Porcentaje del presupuesto (%)</label>
                        <input type="number" id="categoryWeight" min="1" max="100" step="1" placeholder="35" required>
                        <div class="form-help">¬øQu√© porcentaje de tu presupuesto representa esta categor√≠a?</div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeCategoryModal()">Cancelar</button>
                <button class="btn btn-primary" onclick="saveCategory()">Guardar</button>
            </div>
        </div>
    </div>

    <!-- Modal: Share -->
    <div class="modal-overlay" id="shareModal">
        <div class="modal">
            <div class="modal-header">
                <div class="modal-title">Compartir Resultados</div>
                <button class="modal-close" onclick="closeShareModal()">‚úï</button>
            </div>
            <div class="modal-body">
                <div class="share-grid">
                    <div class="share-option" onclick="shareVia('whatsapp')">
                        <div class="share-icon">üí¨</div>
                        <div class="share-label">WhatsApp</div>
                    </div>
                    <div class="share-option" onclick="shareVia('twitter')">
                        <div class="share-icon">üê¶</div>
                        <div class="share-label">Twitter/X</div>
                    </div>
                    <div class="share-option" onclick="shareVia('facebook')">
                        <div class="share-icon">üìò</div>
                        <div class="share-label">Facebook</div>
                    </div>
                    <div class="share-option" onclick="shareVia('reddit')">
                        <div class="share-icon">ü§ñ</div>
                        <div class="share-label">Reddit</div>
                    </div>
                    <div class="share-option" onclick="shareVia('linkedin')">
                        <div class="share-icon">üíº</div>
                        <div class="share-label">LinkedIn</div>
                    </div>
                    <div class="share-option" onclick="shareVia('telegram')">
                        <div class="share-icon">‚úàÔ∏è</div>
                        <div class="share-label">Telegram</div>
                    </div>
                    <div class="share-option" onclick="shareVia('copy')">
                        <div class="share-icon">üìã</div>
                        <div class="share-label">Copiar Link</div>
                    </div>
                    <div class="share-option" onclick="shareVia('native')">
                        <div class="share-icon">üì§</div>
                        <div class="share-label">M√°s opciones</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ======================
        // DATA & STATE
        // ======================

        const currencies = {
            'USD': { symbol: '$', name: 'D√≥lar Estadounidense', flag: 'üá∫üá∏', rate: 1 },
            'EUR': { symbol: '‚Ç¨', name: 'Euro', flag: 'üá™üá∫', rate: 0.92 },
            'GBP': { symbol: '¬£', name: 'Libra Esterlina', flag: 'üá¨üáß', rate: 0.79 },
            'MXN': { symbol: '$', name: 'Peso Mexicano', flag: 'üá≤üáΩ', rate: 17.2 },
            'COP': { symbol: '$', name: 'Peso Colombiano', flag: 'üá®üá¥', rate: 3850 },
            'ARS': { symbol: '$', name: 'Peso Argentino', flag: 'üá¶üá∑', rate: 825 },
            'BRL': { symbol: 'R$', name: 'Real Brasile√±o', flag: 'üáßüá∑', rate: 5.1 },
            'CLP': { symbol: '$', name: 'Peso Chileno', flag: 'üá®üá±', rate: 920 },
            'PEN': { symbol: 'S/', name: 'Sol Peruano', flag: 'üáµüá™', rate: 3.7 },
            'CAD': { symbol: 'C$', name: 'D√≥lar Canadiense', flag: 'üá®üá¶', rate: 1.35 },
            'AUD': { symbol: 'A$', name: 'D√≥lar Australiano', flag: 'üá¶üá∫', rate: 1.52 },
            'JPY': { symbol: '¬•', name: 'Yen Japon√©s', flag: 'üáØüáµ', rate: 145 },
            'CNY': { symbol: '¬•', name: 'Yuan Chino', flag: 'üá®üá≥', rate: 7.2 },
            'CHF': { symbol: 'CHF', name: 'Franco Suizo', flag: 'üá®üá≠', rate: 0.88 },
            'INR': { symbol: '‚Çπ', name: 'Rupia India', flag: 'üáÆüá≥', rate: 83 },
        };

        const cityData = {
            'new-york': { name: 'Nueva York', country: 'USA', index: 100, categories: { housing: 100, food: 100, transport: 100, entertainment: 100, utilities: 100 } },
            'san-francisco': { name: 'San Francisco', country: 'USA', index: 105, categories: { housing: 120, food: 105, transport: 95, entertainment: 105, utilities: 98 } },
            'london': { name: 'Londres', country: 'UK', index: 85, categories: { housing: 95, food: 80, transport: 75, entertainment: 85, utilities: 90 } },
            'tokyo': { name: 'Tokio', country: 'Jap√≥n', index: 90, categories: { housing: 85, food: 95, transport: 70, entertainment: 100, utilities: 95 } },
            'sydney': { name: 'S√≠dney', country: 'Australia', index: 88, categories: { housing: 92, food: 85, transport: 80, entertainment: 90, utilities: 88 } },
            'singapore': { name: 'Singapur', country: 'Singapur', index: 95, categories: { housing: 110, food: 85, transport: 65, entertainment: 95, utilities: 92 } },
            'zurich': { name: 'Z√∫rich', country: 'Suiza', index: 125, categories: { housing: 130, food: 125, transport: 110, entertainment: 130, utilities: 115 } },
            'dubai': { name: 'Dub√°i', country: 'UAE', index: 75, categories: { housing: 80, food: 70, transport: 50, entertainment: 85, utilities: 65 } },
            'paris': { name: 'Par√≠s', country: 'Francia', index: 88, categories: { housing: 95, food: 85, transport: 75, entertainment: 90, utilities: 88 } },
            'berlin': { name: 'Berl√≠n', country: 'Alemania', index: 72, categories: { housing: 75, food: 70, transport: 65, entertainment: 75, utilities: 72 } },
            'barcelona': { name: 'Barcelona', country: 'Espa√±a', index: 68, categories: { housing: 72, food: 65, transport: 60, entertainment: 70, utilities: 68 } },
            'madrid': { name: 'Madrid', country: 'Espa√±a', index: 65, categories: { housing: 70, food: 62, transport: 58, entertainment: 65, utilities: 65 } },
            'lisbon': { name: 'Lisboa', country: 'Portugal', index: 58, categories: { housing: 62, food: 55, transport: 50, entertainment: 60, utilities: 58 } },
            'mexico-city': { name: 'Ciudad de M√©xico', country: 'M√©xico', index: 45, categories: { housing: 42, food: 45, transport: 35, entertainment: 50, utilities: 45 } },
            'buenos-aires': { name: 'Buenos Aires', country: 'Argentina', index: 38, categories: { housing: 35, food: 40, transport: 30, entertainment: 42, utilities: 38 } },
            'bogota': { name: 'Bogot√°', country: 'Colombia', index: 40, categories: { housing: 38, food: 42, transport: 32, entertainment: 45, utilities: 40 } },
            'bangkok': { name: 'Bangkok', country: 'Tailandia', index: 48, categories: { housing: 45, food: 50, transport: 40, entertainment: 52, utilities: 48 } },
        };

        const availableIcons = ['üè†', 'üçΩÔ∏è', 'üöó', 'üé≠', 'üí°', 'üè•', 'üéì', 'üëï', 'üì±', '‚úàÔ∏è', 'üèãÔ∏è', 'üêï', 'üöå', 'üõí', 'üç∫', '‚òï'];

        let currentCurrency = 'USD';
        let categories = [
            { id: 'housing', name: 'Vivienda', icon: 'üè†', weight: 0.35 },
            { id: 'food', name: 'Alimentaci√≥n', icon: 'üçΩÔ∏è', weight: 0.25 },
            { id: 'transport', name: 'Transporte', icon: 'üöó', weight: 0.15 },
            { id: 'entertainment', name: 'Entretenimiento', icon: 'üé≠', weight: 0.15 },
            { id: 'utilities', name: 'Servicios', icon: 'üí°', weight: 0.10 }
        ];

        let editingCategoryId = null;

        // ======================
        // INITIALIZATION
        // ======================

        function init() {
            populateCurrencyDropdown();
            populateCitySelects();
            populateIconPicker();
            renderCategoryManageList();
            setupEventListeners();
            calculateCosts();
        }

        function populateCurrencyDropdown() {
            const dropdown = document.getElementById('currencyDropdown');
            dropdown.innerHTML = '';

            Object.entries(currencies).forEach(([code, data]) => {
                const option = document.createElement('div');
                option.className = 'currency-option';
                if (code === currentCurrency) option.classList.add('selected');

                option.innerHTML = `
                    <span>${data.flag}</span>
                    <div style="flex: 1;">
                        <div style="font-weight: 600; color: var(--gray-900);">${code}</div>
                        <div style="font-size: 0.75rem; color: var(--gray-500);">${data.name}</div>
                    </div>
                `;

                option.addEventListener('click', () => selectCurrency(code));
                dropdown.appendChild(option);
            });
        }

        function populateCitySelects() {
            const select1 = document.getElementById('city1');
            const select2 = document.getElementById('city2');

            Object.entries(cityData).forEach(([key, city]) => {
                const option1 = new Option(`${city.name}, ${city.country}`, key);
                const option2 = new Option(`${city.name}, ${city.country}`, key);
                select1.appendChild(option1);
                select2.appendChild(option2);
            });

            select2.value = 'london';
        }

        function populateIconPicker() {
            const picker = document.getElementById('iconPicker');
            picker.innerHTML = '';

            availableIcons.forEach(icon => {
                const div = document.createElement('div');
                div.className = 'icon-option';
                div.textContent = icon;
                div.addEventListener('click', () => selectIcon(icon));
                picker.appendChild(div);
            });
        }

        function setupEventListeners() {
            // Currency dropdown
            document.getElementById('currencyBtn').addEventListener('click', (e) => {
                e.stopPropagation();
                document.getElementById('currencyDropdown').classList.toggle('active');
            });

            document.addEventListener('click', () => {
                document.getElementById('currencyDropdown').classList.remove('active');
            });

            // Tabs
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', () => switchTab(tab.dataset.tab));
            });

            // Calculation triggers
            document.getElementById('city1').addEventListener('change', calculateCosts);
            document.getElementById('city2').addEventListener('change', calculateCosts);
            document.getElementById('budget').addEventListener('input', calculateCosts);

            // Close modals on overlay click
            document.querySelectorAll('.modal-overlay').forEach(overlay => {
                overlay.addEventListener('click', (e) => {
                    if (e.target === overlay) {
                        overlay.classList.remove('active');
                    }
                });
            });
        }

        // ======================
        // CURRENCY
        // ======================

        function selectCurrency(code) {
            currentCurrency = code;
            const currency = currencies[code];

            document.getElementById('currentFlag').textContent = currency.flag;
            document.getElementById('currentCurrency').textContent = code;
            document.getElementById('budgetWrapper').setAttribute('data-symbol', currency.symbol);

            document.querySelectorAll('.currency-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            event.currentTarget.classList.add('selected');

            document.getElementById('currencyDropdown').classList.remove('active');
            calculateCosts();
        }

        function formatCurrency(amount, code = currentCurrency) {
            const currency = currencies[code];
            const convertedAmount = amount * currency.rate;

            if (code === 'JPY' || code === 'COP' || code === 'CLP' || code === 'ARS') {
                return currency.symbol + ' ' + Math.round(convertedAmount).toLocaleString('es');
            }
            return currency.symbol + ' ' + convertedAmount.toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g, ',');
        }

        // ======================
        // TABS
        // ======================

        function switchTab(tabName) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));

            document.querySelector(`[data-tab="${tabName}"]`).classList.add('active');
            document.getElementById(`tab-${tabName}`).classList.add('active');

            if (tabName === 'results') {
                renderAccordions();
            }
        }

        // ======================
        // CALCULATIONS
        // ======================

        function calculateCosts() {
            const city1Key = document.getElementById('city1').value;
            const city2Key = document.getElementById('city2').value;
            const budgetInput = parseFloat(document.getElementById('budget').value) || 3000;

            const budgetUSD = budgetInput / currencies[currentCurrency].rate;

            const city1 = cityData[city1Key];
            const city2 = cityData[city2Key];

            let totalCity2 = 0;
            const categoryResults = [];

            categories.forEach(category => {
                const cat1Index = city1.categories[category.id] || 100;
                const cat2Index = city2.categories[category.id] || 100;

                const city1Cost = budgetUSD * category.weight * (cat1Index / 100);
                const city2Cost = budgetUSD * category.weight * (cat2Index / 100);
                const difference = ((city2Cost - city1Cost) / city1Cost * 100);

                totalCity2 += city2Cost;
                categoryResults.push({
                    ...category,
                    city1Cost,
                    city2Cost,
                    difference
                });
            });

            // Update summary
            document.getElementById('totalAmount').textContent = formatCurrency(totalCity2);
            document.getElementById('summaryCity').textContent = `para vivir en ${city2.name}`;

            const totalDifference = ((totalCity2 - budgetUSD) / budgetUSD * 100);
            document.getElementById('differenceValue').textContent = `${totalDifference >= 0 ? '+' : ''}${totalDifference.toFixed(0)}%`;

            const sortedByDiff = [...categoryResults].sort((a, b) => Math.abs(b.difference) - Math.abs(a.difference));
            const sortedByCost = [...categoryResults].sort((a, b) => b.city2Cost - a.city2Cost);

            document.getElementById('mostExpensive').textContent = sortedByCost[0].name;
            document.getElementById('costIndex').textContent = city2.index;

            // Store for accordion
            window.currentResults = categoryResults;
        }

        // ======================
        // ACCORDIONS
        // ======================

        function renderAccordions() {
            const container = document.getElementById('accordionContainer');
            container.innerHTML = '';

            const results = window.currentResults || [];
            const city1 = cityData[document.getElementById('city1').value];
            const city2 = cityData[document.getElementById('city2').value];

            results.forEach((cat, index) => {
                const diffClass = cat.difference > 5 ? 'positive' : cat.difference < -5 ? 'negative' : 'neutral';
                const diffArrow = cat.difference > 5 ? '‚Üë' : cat.difference < -5 ? '‚Üì' : '‚Üí';

                const accordion = document.createElement('div');
                accordion.className = 'accordion';
                accordion.innerHTML = `
                    <div class="accordion-header" onclick="toggleAccordion(${index})">
                        <div class="accordion-title">
                            <div class="accordion-icon">${cat.icon}</div>
                            <div>${cat.name}</div>
                        </div>
                        <div class="accordion-meta">
                            <div class="accordion-amount">${formatCurrency(cat.city2Cost)}</div>
                            <div class="accordion-change ${diffClass}">
                                ${diffArrow} ${Math.abs(cat.difference).toFixed(0)}%
                            </div>
                            <div class="accordion-arrow">‚ñº</div>
                        </div>
                    </div>
                    <div class="accordion-content" id="accordion-${index}">
                        <div class="accordion-body">
                            <div class="comparison-row">
                                <div class="comparison-label">${city1.name}:</div>
                                <div class="comparison-value">${formatCurrency(cat.city1Cost)}</div>
                            </div>
                            <div class="comparison-row">
                                <div class="comparison-label">${city2.name}:</div>
                                <div class="comparison-value">${formatCurrency(cat.city2Cost)}</div>
                            </div>
                            <div class="comparison-row">
                                <div class="comparison-label">Porcentaje del presupuesto:</div>
                                <div class="comparison-value">${(cat.weight * 100).toFixed(0)}%</div>
                            </div>
                        </div>
                    </div>
                `;

                container.appendChild(accordion);
            });
        }

        function toggleAccordion(index) {
            const header = event.currentTarget;
            const content = document.getElementById(`accordion-${index}`);

            header.classList.toggle('active');
            content.classList.toggle('active');
        }

        // ======================
        // CATEGORY MANAGEMENT
        // ======================

        function renderCategoryManageList() {
            const container = document.getElementById('categoryManageList');
            container.innerHTML = '';

            categories.forEach(cat => {
                const div = document.createElement('div');
                div.className = 'category-item-manage';
                div.innerHTML = `
                    <div class="category-info">
                        <div class="category-icon-large">${cat.icon}</div>
                        <div class="category-details">
                            <div class="category-name">${cat.name}</div>
                            <div class="category-weight">${(cat.weight * 100).toFixed(0)}% del presupuesto</div>
                        </div>
                    </div>
                    <div class="category-actions">
                        <button class="btn btn-sm btn-secondary" onclick="editCategory('${cat.id}')">‚úèÔ∏è Editar</button>
                        <button class="btn btn-sm btn-danger" onclick="deleteCategory('${cat.id}')">üóëÔ∏è</button>
                    </div>
                `;
                container.appendChild(div);
            });

            updatePercentageWarning();
        }

        function updatePercentageWarning() {
            const total = categories.reduce((sum, cat) => sum + cat.weight, 0);
            const totalPercent = (total * 100).toFixed(0);
            const warning = document.getElementById('percentageWarning');

            if (Math.abs(total - 1) > 0.01) {
                warning.classList.remove('hidden');
                document.getElementById('currentTotal').textContent = totalPercent + '%';
            } else {
                warning.classList.add('hidden');
            }
        }

        function openCategoryModal() {
            editingCategoryId = null;
            document.getElementById('categoryModalTitle').textContent = 'Agregar Categor√≠a';
            document.getElementById('categoryForm').reset();
            document.getElementById('categoryModal').classList.add('active');

            document.querySelectorAll('.icon-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            document.querySelector('.icon-option').classList.add('selected');
        }

        function closeCategoryModal() {
            document.getElementById('categoryModal').classList.remove('active');
        }

        function selectIcon(icon) {
            document.querySelectorAll('.icon-option').forEach(opt => {
                opt.classList.remove('selected');
            });
            event.currentTarget.classList.add('selected');
        }

        function editCategory(id) {
            const category = categories.find(c => c.id === id);
            if (!category) return;

            editingCategoryId = id;
            document.getElementById('categoryModalTitle').textContent = 'Editar Categor√≠a';
            document.getElementById('categoryId').value = id;
            document.getElementById('categoryName').value = category.name;
            document.getElementById('categoryWeight').value = (category.weight * 100).toFixed(0);

            document.querySelectorAll('.icon-option').forEach(opt => {
                opt.classList.remove('selected');
                if (opt.textContent === category.icon) {
                    opt.classList.add('selected');
                }
            });

            document.getElementById('categoryModal').classList.add('active');
        }

        function saveCategory() {
            const name = document.getElementById('categoryName').value.trim();
            const weight = parseFloat(document.getElementById('categoryWeight').value) / 100;
            const selectedIcon = document.querySelector('.icon-option.selected');

            if (!name || !weight || !selectedIcon) {
                alert('Por favor completa todos los campos');
                return;
            }

            if (editingCategoryId) {
                // Edit existing
                const index = categories.findIndex(c => c.id === editingCategoryId);
                categories[index] = {
                    ...categories[index],
                    name,
                    icon: selectedIcon.textContent,
                    weight
                };
            } else {
                // Add new
                const id = 'cat_' + Date.now();
                categories.push({
                    id,
                    name,
                    icon: selectedIcon.textContent,
                    weight
                });
            }

            renderCategoryManageList();
            closeCategoryModal();
            calculateCosts();

            // Show success message
            showAlert('Categor√≠a guardada exitosamente', 'success');
        }

        function deleteCategory(id) {
            if (categories.length <= 1) {
                alert('Debes tener al menos una categor√≠a');
                return;
            }

            if (confirm('¬øEst√°s seguro de eliminar esta categor√≠a?')) {
                categories = categories.filter(c => c.id !== id);
                renderCategoryManageList();
                calculateCosts();
                showAlert('Categor√≠a eliminada', 'success');
            }
        }

        function showAlert(message, type = 'info') {
            // Simple alert implementation
            const alertDiv = document.createElement('div');
            alertDiv.className = `alert alert-${type}`;
            alertDiv.style.position = 'fixed';
            alertDiv.style.top = '20px';
            alertDiv.style.right = '20px';
            alertDiv.style.zIndex = '10000';
            alertDiv.innerHTML = `
                <div class="alert-icon">${type === 'success' ? '‚úì' : '‚ÑπÔ∏è'}</div>
                <div class="alert-content">
                    <div class="alert-text">${message}</div>
                </div>
            `;

            document.body.appendChild(alertDiv);
            setTimeout(() => alertDiv.remove(), 3000);
        }

        // ======================
        // SHARE FUNCTIONALITY
        // ======================

        function openShareModal() {
            document.getElementById('shareModal').classList.add('active');
        }

        function closeShareModal() {
            document.getElementById('shareModal').classList.remove('active');
        }

        function shareVia(platform) {
            const city1 = cityData[document.getElementById('city1').value].name;
            const city2 = cityData[document.getElementById('city2').value].name;
            const total = document.getElementById('totalAmount').textContent;
            const diff = document.getElementById('differenceValue').textContent;

            const text = `üí∞ Compar√© el costo de vida: ${city1} vs ${city2}. Necesitar√≠a ${total} al mes (${diff} de diferencia).`;
            const url = window.location.href;
            const encodedText = encodeURIComponent(text);
            const encodedUrl = encodeURIComponent(url);

            let shareUrl = '';

            switch (platform) {
                case 'whatsapp':
                    shareUrl = `https://wa.me/?text=${encodedText}%20${encodedUrl}`;
                    break;
                case 'twitter':
                    shareUrl = `https://twitter.com/intent/tweet?text=${encodedText}&url=${encodedUrl}`;
                    break;
                case 'facebook':
                    shareUrl = `https://www.facebook.com/sharer/sharer.php?u=${encodedUrl}&quote=${encodedText}`;
                    break;
                case 'reddit':
                    shareUrl = `https://reddit.com/submit?url=${encodedUrl}&title=${encodedText}`;
                    break;
                case 'linkedin':
                    shareUrl = `https://www.linkedin.com/sharing/share-offsite/?url=${encodedUrl}`;
                    break;
                case 'telegram':
                    shareUrl = `https://t.me/share/url?url=${encodedUrl}&text=${encodedText}`;
                    break;
                case 'copy':
                    navigator.clipboard.writeText(url).then(() => {
                        showAlert('¬°Link copiado al portapapeles!', 'success');
                        closeShareModal();
                    }).catch(() => {
                        alert('No se pudo copiar el link');
                    });
                    return;
                case 'native':
                    if (navigator.share) {
                        navigator.share({
                            title: 'Calculadora de Costo de Vida',
                            text: text,
                            url: url
                        }).then(() => {
                            closeShareModal();
                        }).catch(() => { });
                    } else {
                        alert('Tu navegador no soporta esta funci√≥n');
                    }
                    return;
            }

            if (shareUrl) {
                window.open(shareUrl, '_blank', 'width=600,height=400');
                closeShareModal();
            }
        }

        // ======================
        // INIT
        // ======================

        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>

</html>